(function(a){function c(a){return a.clone().css({position:'absolute'})}function d(f){for(var i=[],c=0,b,j,g,h;c<f.length;c++){if(f[c].nodeName==='BR'){i.push('<br>');continue}if(f[c].nodeType==3)b=e(f[c].textContent||f[c].toString());else{j=a(f[c]).clone(),b=d(j.contents());for(g=0;g<b.length;g++)j.empty(),b[g]=j.html(b[g]).wrap('<p></p>').parent().html()}for(h=0;h<b.length;h++){if(b[h]==='')continue;i.push(b[h])}}return i}function e(a){return a.split(/\s+/)}function b(b,d,e){b='<div class="stop">'+b;var c=a(b).find('*:not(:has("*"))').html(d).closest('.stop').slice(-1);return c.children().each(function(b,a){a.style.setProperty('--line-index',e)}),c.html()}a.fn.splitLines=function(l){var h={width:'auto',tag:'<div>',wrap:'',keepHtml:!0},g,r,q,p,f,m,n,k,j,i,o;l&&a.extend(h,l),g=c(this),r=this.contents(),q=this.text(),this.append(g),g.text('42'),p=g.height()+2,g.empty(),f=c(g),m=h.width,h.width==='auto'&&(m=this[0].offsetWidth),f.width(m),this.append(f),n=h.keepHtml?d(r):e(q),j=0;for(i=0;i<n.length;i++){if(o=f.html(),f.html(o+n[i]+' '),f.html()==k){k='',g.append(b(h.tag,f.html(),j)),f.html('');continue}f.height()>p&&(k=f.html(),f.html(o),g.append(b(h.tag,f.html(),j)),f.html(''),i--,j++)}g.append(b(h.tag,f.html(),j)),this.html(g.html())}})(jQuery)